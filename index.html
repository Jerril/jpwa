<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="icon.png">
    <link rel="manifest" href="https://jerril.github.io/jpwa/manifest.json">
    <title>Sample PWA</title>

    <style>
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 400px;
            text-align: center;
        }

        .close {
            position: absolute;
            right: 10px;
            top: 10px;
            font-size: 24px;
            cursor: pointer;
        }

        #install-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Trying Out PWA</h1>
    
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>


    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>


    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem rem neque cupiditate dolorum aliquam! Commodi alias et adipisci ea, perspiciatis repellat ut molestiae. Vel, rerum nostrum! Temporibus deserunt quisquam quo?</p>

    <button onClick="sampleFn()">
        Click to log a message on your browser console
    </button>
    <!-- Install App Modal: Android -->
    <div id="install-modal" class="modal">
        <div class="modal-content">
            <span class="close" id="close-modal">&times;</span>
            <h2>Install Our App</h2>
            <p>Get the best experience by installing our app on your device.</p>
            <button id="install-button">Install</button>
        </div>
    </div>

    <!-- Install App Modal: IOS -->
    <div id="install-modal-ios" class="modal">
        <div class="modal-content">
            <span class="close" id="close-modal">&times;</span>
            <h2>Install Our App</h2>
            <p>Install this application on your home screen for quick, easy and offline access when you‚Äôre on the go. Close this modal, tap the ‚Äúshare‚Äù icon, and then tap on ‚ÄúAdd to home screen‚Äù</p>
            <button id="install-button-ios">Install</button>
        </div>
    </div>

    <script>
        function sampleFn(e) {
            console.log('Hi friend :)');
        }

        function showIosInstallModal(localStorageKey) {
            // detect if the device is on iOS
            const isIos = () => {
                const userAgent = window.navigator.userAgent.toLowerCase();
                return /iphone|ipad|ipod/.test(userAgent);
            };
            
            // check if the device is in standalone mode
            const isInStandaloneMode = () => {
                return (
                    "standalone" in window.navigator &&
                    window.navigator.standalone
                );
            };
            
            // show the modal only once
            const localStorageKeyValue = localStorage.getItem(localStorageKey);
            const iosInstallModalShown = localStorageKeyValue
                ? JSON.parse(localStorageKeyValue)
                : false;
            const shouldShowModalResponse =
                isIos() && !isInStandaloneMode() && !iosInstallModalShown;

            if (shouldShowModalResponse) {
                document.getElementById('install-modal').style.display = 'block';
            }

            document.getElementById('install-button-ios').addEventListener('click', () => {
                navigator
                    .share({
                        title: document.title,
                        text: 'Hello World',
                        url: window.location.href
                    })
                    .then(() => console.log('Successful share! üéâ'))
                    .catch(err => console.error(err));
            });

            return shouldShowModalResponse;
        }
        showIosInstallModal('ios-pwa');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();

            document.getElementById('install-modal').style.display = 'block';

            document.getElementById('install-button').addEventListener('click', () => {
                e.prompt();
                document.getElementById('install-modal').style.display = 'none';
            });

            document.getElementById('close-modal').addEventListener('click', () => {
                document.getElementById('install-modal').style.display = 'none';
            });
        });
    </script>
</body>
</html>
